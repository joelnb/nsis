<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<title>NSIS Modern User Interface</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">

body
	{
	padding: 10px;
	background-color: #F0F0F0;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 10pt;
	font-weight: normal;
	}

center
	{
	text-align: center;
	}

table
	{
	margin: auto;
	text-align: left;
	background-color: #FFFFFF;
	}

.maintable
	{
    border: 2px solid #376EAB;
	}

.margin
	{
	margin: 20px;
	}

.text
	{
	margin: 20px;
	}

.bold
	{
	font-weight: bold;
	color: #303030;
	}

.changelog
	{
	}

.header
	{
	font-size: 14pt;
	color: #7A7272;
	}
	
.subheader
	{
	margin: 20px;
	font-size: 11pt;
	font-weight: bold;
	color: #303030;
	}

.footer
	{
    margin: 5px 5px 5px 5px;
    text-align: right;
    font-size: 8pt;
	color: #909090;
	}
	
a:link, a:visited, a:active
	{
	color: #294F75;
	text-decoration: none;
	}
	
a:hover
	{
	color: #182634;
	text-decoration: none;
	}
	
</style>

</head>

<body>

<div class="center">
<table width="750" cellpadding="0" cellspacing="0" class="maintable">
<tr><td>
<table border="0" cellpadding="0" cellspacing="0">
<tr class="header">
  <td><img src="Readme.jpg" width="750" height="80" alt=""></td>
</tr>

<tr>
 <td><div class="margin">
<p class="header">Introduction</p>
<p class="text">NSIS 2 makes it is possible to create installers
with a custom user interface.</p>
<p class="text"> I made this interface with a modern wizard style, 
  like the wizards of recent Windows versions. This new interface 
  also features new graphics and a description area on the
  component-selection page.</p>
<p class="text">To use this new interface for for installer, you need 
  to add some code to your NSIS script. Read this document for more info!</p>
<p class="header">Requirements</p>
<p class="text"><a href="http://nsis.sourceforge.net">NSIS 2 beta 0 (or later)</a></p>
<p class="header">Screenshot</p>
<p class="text"><img src="Screenshot.png" width="504" height="391" alt=""></p>
<p class="header">How to use</p>
<p class="text">The Modern UI has a macro system, so most of the code
  has already been written for you!<br><br>
  The easiest way to use the Modern UI is to customize one of the <a href="#examples">example</a>
  scripts, but you   can also modify an existing script.<br><br>
  There are 8 things you need to insert in an existing script to use the
  Modern UI (in order).<br><br>
  <p class="subheader">1. Include the header file</p>
  <pre class="margin">!include "${NSISDIR}\Contrib\Modern UI\System.nsh"</pre>
  <p class="subheader">2. Define the name and version of your software and the installer name</p>
<pre class="margin">!define MUI_PRODUCT "Test Software" ;Define your own software name here
!define MUI_VERSION "1.0" ;Define your own software version here

!define MUI_NAME "${NAME} ${VERSION}" ;Installer name</pre>
<p class="text">Note: If you want to use a different name for different languages, undef these
defines and define them again before you insert a language file.</p>
  <p class="subheader">3. Define which elements you are using</span></p>
  <p class="text">The Modern UI should know which things it should insert. Use the following defines:</p>
<pre class="margin">!define MUI_LICENSEPAGE ;License page
!define MUI_COMPONENTSPAGE ;Component-selection page
!define MUI_DIRECTORYPAGE ;Directory-selection page
!define MUI_LICENSEPAGE ;License page
!define MUI_UNINSTALLER ;Uninstaller
!define MUI_ABORTWARNING ;Abort warning messabox
!define MUI_INSTALLOPTIONS ;Use Install Options
!define MUI_CUSTOMPAGECOMMANDS ;Use customized pages</pre>
  <p class="subheader">4. Insert language files</span></p>
  <p class="text">Insert the Modern UI language files for the languages you are using:</p>
  <pre class="margin">!insertmacro MUI_LANGUAGE "English"</pre>
  <p class="text">Note: The Modern UI language files load the NLF language files,
  so you should not use LoadLanguageFile.</p>
  <p class="subheader">5. Define interface settings (optional)</span></p>
  <p class="text">You can change the settings of the interface by usings defines:</p>
  <pre class="margin">!define MUI_UI "${NSISDIR}\Contrib\UIs\modern2.exe"</pre>
  <p class="text">If you don't define a setting, the default will be used.</p>
  <p class="text">The following settings are available: <i>(default)</i><br><br>
  <span class="bold">MUI_UI</span> <i>(${NSISDIR}\Contrib\UIs\modern.exe)</i>
   - The interface file with the dialog resources<br>
  <span class="bold">MUI_ICON</span> <i>(${NSISDIR}\Contrib\Icons\modern-install.ico)</i>
   - The icon of the instaleller<br>
  <span class="bold">MUI_UNICON</span> <i>(${NSISDIR}\Contrib\Icons\modern-uninstall.ico)</i>
   - The icon of the uninstaleller<br>
  <span class="bold">MUI_CHECKBITMAP</span> <i>(${NSISDIR}\Contrib\Icons\modern.bmp)</i>
   - The bitmap with images for the checks of the
  component select treeview.<br>
  <span class="bold">MUI_FONT</span> <i>(Tahoma)</i> 
  - The font of the installer and uninstaller<br>
  <span class="bold">MUI_INSTALLCOLORS</span> <i>(/windows)</i>
   - The hexadecimal colors of the details screen ("foreground" "background")<br>
  <span class="bold">MUI_PROGRESSBAR</span> <i>(smooth)</i>
   - The style of the progress bar ("colored" to use the MUI_INSTALLCOLORS or ""
  for a old-school windows look)</p>
  <p class="subheader">6. Insert the MUI_SYSTEM macro</p>
  <pre class="margin">!insertmacro MUI_SYSTEM</pre>
  <p class="subheader">7. Insert the MUI_SECTIONS_FINISHHEADER macro
  <p class="text">You should insert the MUI_SECTIONS_FINISHHEADER after all the
  sections to display the finish-header.</p>
<pre class="margin">
!insertmacro MUI_SECTIONS_FINISHHEADER ;Insert this macro after the sections
</pre>
<p class="text">In the uninstaller, insert MUI_UNFINISHHEADER at the end of the
Unintaller section.</p>
<pre class="margin">
!insertmacro MUI_UNFINISHHEADER
</pre>
  <p class="subheader">8. Set the descriptions for the sections</p>
  <p class="text">Insert the description macro's to set the descriptions
  for the sections. These descriptions will be displayed when the user
  hovers the mouse over a component in the component-selection page:</p>
<pre class="margin">
LangString DESC_SectionName1 ${LANG_ENGLISH} "Description of section 1."
LangString DESC_SectionName2 ${LANG_ENGLISH} "Description of section 2."

!insertmacro MUI_FUNCTIONS_DESCRIPTION_START
  !insertmacro MUI_DESCRIPTION_TEXT ${SectionName1} $(DESC_SectionName1)
  !insertmacro MUI_DESCRIPTION_TEXT ${SectionName2} $(DESC_SectionName2)
!insertmacro MUI_FUNCTIONS_DESCRIPTION_END
</pre>
<p class="text">Note: Always set a name for a section:</p>
<pre class="margin">
Section "Section Name 1" SectionName1
 ...
SectionEnd

Section "Section Name 2" SectionName2
 ...
SectionEnd
</pre>
<p class="header">Custom pages</p>
<p class="text">Have a look at the <a href="..\InstallOptions\Install Options.html">
Install Options documentation</a> for info about creating Install Options INI Files.</p>
<p class="subheader">Custom page commands</p>
<p class="text">If you want add custom pages to your installer using Install Options,
you should insert you own page commands to set the order of the pages and the names
of the page functions.</p>
<pre class="margin">
!insertmacro MUI_PAGECOMMAND_LICENSE
!insertmacro MUI_PAGECOMMAND_COMPONENTS
!insertmacro MUI_PAGECOMMAND_DIRECTORY
Page custom [function name] ;A custom page
!insertmacro MUI_PAGECOMMAND_INSTFILES
</pre>
<p class="text">Note: If you are using custom Page commands, define MUI_CUSTOMPAGECOMMANDS
before inserting the MUI_SYSTEM macro.</p>
<p class="subheader">Call Install Options</p>
<p class="text">You can call Install Options in [function name]:</p>
<pre class="margin">
LangString TEXT_IO_TITLE ${LANG_ENGLISH} "Install Options Page"
LangString TEXT_IO_SUBTITLE ${LANG_ENGLISH} "Create your own dialog!"

Function [function name]
  !insertmacro MUI_HEADER_TEXT $(TEXT_IO_TITLE) $(TEXT_IO_SUBTITLE)
  !insertmacro MUI_INSTALLOPTIONS_SHOW "ioFile.ini"
FunctionEnd
</pre>
<p class="subheader">Write title and abortwarning</p>
<p class="text">Use these macro's in .onInit to write the page
title and abortwarning to an INI File.</p>
<pre class="margin">
LangString TEXT_IO_PAGETITLE ${LANG_ENGLISH} "Page Title"

!insertmacro MUI_INSTALLOPTIONS_WRITETITLE "ioFile.ini" "$(TEXT_IO_PAGETITLE)"
!insertmacro MUI_INSTALLOPTIONS_WRITEABORTWARNING "ioFile.ini" \
"$(TEXT_IO_PAGETITLE)"
</pre>
<p class="header"><a name="examples">Examples</a></p>
<p class="text">Basic: <a href="../../Examples/Modern UI/Basic.nsi">Basic.nsi</a><br>
  Multilanguage: <a href="../../Examples/Modern UI/MultiLanguage.nsi">MultiLanguage.nsi</a><br>
  Cutom pages: <a href="../../Examples/Modern UI/InstallOptions.nsi">InstallOptions.nsi</a><br>
  </p>
<p class="header">The interface</p>
<p class="subheader">Modern.exe and modern2.exe</span></p>
  <p class="text">There are two different versions of the interface.
  Modern.exe contains the dialogs of the standard interface.
  If you have an installer with a lot of subsections 
  or long section names, use modern2.exe, which has a different
  component-selection page.</p>
<p class="subheader">Customize the dialogs</span></p>
  <p class="text">To change elements on the dialogs, modify modern.exe or
  modern2.exe in the Contrib\UIs directory using a resource editor such as
  <a href="http://www.users.on.net/johnson/resourcehacker/">Resource Hacker</a>.<br><br>
The 'Loading Setup' text on the splash screen which 
  is being displayed when the installer is starting (Verifying 
  installer, Unpacking data when using COMPRESS_WHOLE) cannot 
  be changed by the script, because the installer is not started 
  yet when this dialog is being displayed. If you want to change 
  this text, modify dialog 111 of modern(2).exe.<br>
The 'verifying installer' and 'unpacking data' texts are defined in
  the language header file of the NSIS exehead (Source\exehead\lang.h). 
  To change them, you need to edit this file and recompile NSIS.</p>
<p class="header">Version history</p>
<ul>
<li class="changelog">1.4 - November 4, 2002
  <ul>
    <li>Uses new NSIS Page command
    <li>Macro system updates (smaller)
    <li>Macro System a lot easier
    <li>Modern UI Language Files load NLF language files
    <li>Renamed macro's and defines
  </ul>
</ul>  
<p class="text"><a href="Changelog.txt">Complete version history</a></p>
<p class="header">Credits</p>
<p class="text">Made by Joost Verburg.<br>
  Icons designed by Nikos Adamamas, aka adni18.<br>
  Thanks to Amir Szekely, aka KiCHiK for his work on NSIS 
  to make this possible.</p>
<p class="header">Help</p>
<p class="text">Please post questions at the <a href="http://forums.winamp.com/forumdisplay.php?forumid=65">NSIS 
  Forum</a>.</p>
<p class="header">License</p>
<pre class="margin">Copyright &copy; 2002 Joost Verburg

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute
it freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; 
   you must not claim that you wrote the original software.
   If you use this software in a product, an acknowledgment in the
   product documentation would be appreciated but is not required.
2. Altered versions must be plainly marked as such,
   and must not be misrepresented as being the original software.
3. This notice may not be removed or altered from any distribution.
</pre>
  </div></td>
  </tr>
  <tr>
    <td><div class="footer">&copy;2002 Joost Verburg</div></td>
  </tr>
</table>
</td></tr>
</table>
</div>

</body>
</html>